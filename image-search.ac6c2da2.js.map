{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAU,IAAI,EAAAC,EAAAC,Y,SAKLC,I,OAAAA,EAAfC,EAAAN,EAAA,CAAAM,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAKtBC,EADUC,EAGRC,EAUoBC,EAAhBC,EAAMC,EAORC,E,qEAvBRP,EAAIQ,iBAIAP,EAAAD,EAAIS,cADNP,EACED,EADFS,SAAYR,YAGRC,EAAQD,EAAYS,MAAMC,OAAOC,cAC7B,C,uDAIVrB,EAAQU,YAAcC,EACtBW,IACAC,EAAAC,KAAKC,eAAeC,UAAUC,IAAI,mB,mBAGF3B,EAAQ4B,Y,WAAdhB,EAAyBiB,EAAAC,KAAzCjB,EAAgBD,EAAhBC,KAAMC,EAAUF,EAAVE,MACM,IAAhBD,EAAKkB,OAAY,C,uBACnB3B,EAAA4B,GAASC,OAAOC,QACd,4E,2BAIEnB,GAAS,EAAAoB,EAAAC,cAAavB,GAC5BU,EAAAC,KAAKa,QAAQC,mBAAmB,YAAavB,GAE7Cf,EAAQuC,oBAAoBzB,GAC5BV,EAAA4B,GAASC,OAAOO,QAAQ,oBAA0BC,OAAN3B,EAAM,YAAW,CAC3D4B,QAAS,IACTC,SAAU,aAIR3C,EAAQ4C,gBACVrB,EAAAC,KAAKC,eAAeC,UAAUmB,OAAO,mB,kDAGvCC,QAAQC,IAAGlB,EAAAmB,IACX1B,I,2DAvCuB2B,MAAAC,KAAAC,U,CAiE3B,SAAS7B,IACPtB,EAAQoD,YACR7B,EAAAC,KAAKa,QAAQgB,UAAY,E,CAtE3B9B,EAAAC,KAAK8B,cAAcC,iBAAiB,U,SAGR/C,G,OAAbL,EAAY8C,MAAAC,KAAAC,U,IAF3B5B,EAAAC,KAAKC,eAAe8B,iBAAiB,SA6CrC,WACEvD,EAAQwD,gBAEHxD,EAAQ4C,iBACXrB,EAAAC,KAAKC,eAAeC,UAAUC,IAAI,mBAClCvB,EAAA4B,GAASC,OAAOwB,KACd,+DAIJzD,EACG4B,YACA8B,MAAK,SAAAC,G,IAAG9C,EAAI8C,EAAJ9C,KACDE,GAAS,EAAAoB,EAAAC,cAAavB,GAC5BU,EAAAC,KAAKa,QAAQC,mBAAmB,YAAavB,E,IAE9C6C,OAAM,SAAAC,GACLf,QAAQC,IAAIc,GACZvC,G","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\nimport { PixabayAPI } from './PixabayAPI';\nimport { createMarkup } from './createMarkup';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\n\nconst pixabay = new PixabayAPI();\n\nrefs.searchFormRef.addEventListener('submit', handleSubmit);\nrefs.loadMoreBtnRef.addEventListener('click', onLoadMoreClick);\n\nasync function handleSubmit(evt) {\n  evt.preventDefault();\n\n  const {\n    elements: { searchQuery },\n  } = evt.currentTarget;\n\n  const query = searchQuery.value.trim().toLowerCase();\n  if (!query) {\n    return;\n  }\n\n  pixabay.searchQuery = query;\n  clearPage();\n  refs.loadMoreBtnRef.classList.add('visually-hidden');\n\n  try {\n    const { hits, total } = await pixabay.getPhotos();\n    if (hits.length === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    const markup = createMarkup(hits);\n    refs.listRef.insertAdjacentHTML('beforeend', markup);\n\n    pixabay.calculateTotalPages(total);\n    Notiflix.Notify.success(`Hooray! We found ${total} images.`, {\n      timeout: 1000,\n      position: 'left-top',\n    });\n    // console.log(pixabay);\n\n    if (pixabay.isShowLoadMore) {\n      refs.loadMoreBtnRef.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    clearPage();\n  }\n}\n\nfunction onLoadMoreClick() {\n  pixabay.incrementPage();\n\n  if (!pixabay.isShowLoadMore) {\n    refs.loadMoreBtnRef.classList.add('visually-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n\n  pixabay\n    .getPhotos()\n    .then(({ hits }) => {\n      const markup = createMarkup(hits);\n      refs.listRef.insertAdjacentHTML('beforeend', markup);\n    })\n    .catch(error => {\n      console.log(error);\n      clearPage();\n    });\n}\n\nfunction clearPage() {\n  pixabay.resetPage();\n  refs.listRef.innerHTML = '';\n}\n"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$pixabay","$evVGa","PixabayAPI","$b8f9b7833fa37166$var$_handleSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","evt","_currentTarget","searchQuery","query","ref","hits","total","markup","preventDefault","currentTarget","elements","value","trim","toLowerCase","$b8f9b7833fa37166$var$clearPage","$foHtm","refs","loadMoreBtnRef","classList","add","getPhotos","_ctx","sent","length","$iU1Pc","Notify","failure","$uIGk8","createMarkup","listRef","insertAdjacentHTML","calculateTotalPages","success","concat","timeout","position","isShowLoadMore","remove","console","log","t0","apply","this","arguments","resetPage","innerHTML","searchFormRef","addEventListener","incrementPage","info","then","param","catch","error"],"version":3,"file":"image-search.ac6c2da2.js.map"}