function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequired7c6=n);var s=n("8XIVS"),a=n("lNb2b"),i=n("cLm0d"),c=n("eWCmQ");const l=new(0,s.PixabayAPI);i.refs.searchFormRef.addEventListener("submit",(async function(t){t.preventDefault();const{elements:{searchQuery:o}}=t.currentTarget,r=o.value.trim().toLowerCase();if(!r)return;l.searchQuery=r,f(),i.refs.loadMoreBtnRef.classList.add("visually-hidden");try{const{hits:t,total:o}=await l.getPhotos();if(0===t.length)return void e(c).Notify.failure("Sorry, there are no images matching your search query. Please try again.");const r=(0,a.createMarkup)(t);if(i.refs.listRef.insertAdjacentHTML("beforeend",r),l.calculateTotalPages(o),e(c).Notify.success(`Hooray! We found ${o} images.`,{timeout:1e3,position:"left-top"}),l.isShowLoadMore){const e=document.querySelector(".photo-card:last-child");d.observe(e)}}catch(e){console.log(e),f()}})),i.refs.loadMoreBtnRef.addEventListener("click",(function(){l.incrementPage(),l.isShowLoadMore||(i.refs.loadMoreBtnRef.classList.add("visually-hidden"),e(c).Notify.info("We're sorry, but you've reached the end of search results."));l.getPhotos().then((({hits:e})=>{const t=(0,a.createMarkup)(e);i.refs.listRef.insertAdjacentHTML("beforeend",t)})).catch((e=>{console.log(e),f()}))}));const d=new IntersectionObserver((async function(t,o){t.forEach((async t=>{if(t.isIntersecting){console.log(t.intersectionRect),l.incrementPage(),o.unobserve(t.target),l.isShowLoadMore||e(c).Notify.info("We're sorry, but you've reached the end of search results.");try{const{hits:e}=await l.getPhotos(),t=(0,a.createMarkup)(e);if(i.refs.listRef.insertAdjacentHTML("beforeend",t),l.isShowLoadMore){const e=document.querySelector(".photo-card:last-child");d.observe(e)}}catch(e){console.log(e),f()}}}))}),{root:null,rootMargin:"100px",threshold:1});function f(){l.resetPage(),i.refs.listRef.innerHTML=""}
//# sourceMappingURL=infinite-scroll.4bac99e0.js.map
