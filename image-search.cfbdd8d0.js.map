{"mappings":"6kBAMA,MAAMA,EAAU,IAAI,EAAAC,EAAAC,YAsEpB,SAASC,IACPH,EAAQI,YACRC,EAAAC,KAAKC,QAAQC,UAAY,E,CAtE3BH,EAAAC,KAAKG,cAAcC,iBAAiB,UAGpCC,eAA4BC,GAC1BA,EAAIC,iBAEJ,MACEC,UAAUC,YAAEA,IACVH,EAAII,cAEFC,EAAQF,EAAYG,MAAMC,OAAOC,cACvC,IAAKH,EACH,OAGFjB,EAAQe,YAAcE,EACtBd,IACAE,EAAAC,KAAKe,eAAeC,UAAUC,IAAI,mBAElC,IACE,MAAMC,KAAEA,EAAIC,MAAEA,SAAgBzB,EAAQ0B,YACtC,GAAoB,IAAhBF,EAAKG,OAIP,YAHAC,EAAAC,GAASC,OAAOC,QACd,4EAIJ,MAAMC,GAAS,EAAAC,EAAAC,cAAaV,GAC5BnB,EAAAC,KAAKC,QAAQ4B,mBAAmB,YAAaH,GAE7ChC,EAAQoC,oBAAoBX,GAC5BG,EAAAC,GAASC,OAAOO,QAAQ,oBAAoBZ,YAAiB,CAC3Da,QAAS,IACTC,SAAU,aAEZC,QAAQC,IAAIzC,GAERA,EAAQ0C,gBACVrC,EAAAC,KAAKe,eAAeC,UAAUqB,OAAO,kB,CAEvC,MAAOC,GACPJ,QAAQC,IAAIG,GACZzC,G,KAzCJE,EAAAC,KAAKe,eAAeX,iBAAiB,SA6CrC,WACEV,EAAQ6C,gBAEH7C,EAAQ0C,iBACXrC,EAAAC,KAAKe,eAAeC,UAAUC,IAAI,mBAClCK,EAAAC,GAASC,OAAOgB,KACd,+DAIJ9C,EACG0B,YACAqB,MAAK,EAACvB,KAAEA,MACP,MAAMQ,GAAS,EAAAC,EAAAC,cAAaV,GAC5BnB,EAAAC,KAAKC,QAAQ4B,mBAAmB,YAAaH,EAAO,IAErDgB,OAAMJ,IACLJ,QAAQC,IAAIG,GACZzC,GAAW,G","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\nimport { PixabayAPI } from './PixabayAPI';\nimport { createMarkup } from './createMarkup';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\n\nconst pixabay = new PixabayAPI();\n\nrefs.searchFormRef.addEventListener('submit', handleSubmit);\nrefs.loadMoreBtnRef.addEventListener('click', onLoadMoreClick);\n\nasync function handleSubmit(evt) {\n  evt.preventDefault();\n\n  const {\n    elements: { searchQuery },\n  } = evt.currentTarget;\n\n  const query = searchQuery.value.trim().toLowerCase();\n  if (!query) {\n    return;\n  }\n\n  pixabay.searchQuery = query;\n  clearPage();\n  refs.loadMoreBtnRef.classList.add('visually-hidden');\n\n  try {\n    const { hits, total } = await pixabay.getPhotos();\n    if (hits.length === 0) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n    const markup = createMarkup(hits);\n    refs.listRef.insertAdjacentHTML('beforeend', markup);\n\n    pixabay.calculateTotalPages(total);\n    Notiflix.Notify.success(`Hooray! We found ${total} images.`, {\n      timeout: 1000,\n      position: 'left-top',\n    });\n    console.log(pixabay);\n\n    if (pixabay.isShowLoadMore) {\n      refs.loadMoreBtnRef.classList.remove('visually-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    clearPage();\n  }\n}\n\nfunction onLoadMoreClick() {\n  pixabay.incrementPage();\n\n  if (!pixabay.isShowLoadMore) {\n    refs.loadMoreBtnRef.classList.add('visually-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n\n  pixabay\n    .getPhotos()\n    .then(({ hits }) => {\n      const markup = createMarkup(hits);\n      refs.listRef.insertAdjacentHTML('beforeend', markup);\n    })\n    .catch(error => {\n      console.log(error);\n      clearPage();\n    });\n}\n\nfunction clearPage() {\n  pixabay.resetPage();\n  refs.listRef.innerHTML = '';\n}\n"],"names":["$1f0dc3b9307be026$var$pixabay","$8XIVS","PixabayAPI","$1f0dc3b9307be026$var$clearPage","resetPage","$cLm0d","refs","listRef","innerHTML","searchFormRef","addEventListener","async","evt","preventDefault","elements","searchQuery","currentTarget","query","value","trim","toLowerCase","loadMoreBtnRef","classList","add","hits","total","getPhotos","length","$parcel$interopDefault","$eWCmQ","Notify","failure","markup","$lNb2b","createMarkup","insertAdjacentHTML","calculateTotalPages","success","timeout","position","console","log","isShowLoadMore","remove","error","incrementPage","info","then","catch"],"version":3,"file":"image-search.cfbdd8d0.js.map"}